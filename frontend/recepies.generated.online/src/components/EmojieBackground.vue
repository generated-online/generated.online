<template>
    <div class="background">

        <span class="emojie" v-for="(e, idx) in matchingEmos" v-bind:key="idx"
            :style="'top:'+ e.top + 'px; left:' + e.left +'px;'">{{e.text}}</span>
    </div>
</template>

<script>
    export default {
        props: ["recipe"],
        data() {
            return {
                allEmos: {
                    "Wasser": ["ðŸ’§"],
                    "Fisch": ["ðŸ³", "ðŸ¬", "ðŸ‹", "ðŸŸ", "ðŸ ", "ðŸ¦ˆ"],
                    "Oktopus": ["ðŸ™"],
                    "Krabbe": ["ðŸ¦€"],
                    "Hummer": ["ðŸ¦ž"],
                    "Garnele": ["ðŸ¦"],
                    "Tintenfisch": ["ðŸ¦‘"],
                    "Kuh": ["ðŸ®", "ðŸ„", "ðŸ‚"],
                    "Rind": ["ðŸ®", "ðŸ„", "ðŸ‚"],
                    "Kalb": ["ðŸ®", "ðŸ„", "ðŸ‚"],
                    "Schwein": ["ðŸ–", "ðŸ·", "ðŸ½"],
                    "Schaf": ["ðŸ", "ðŸ‘"],
                    "Lamm": ["ðŸ", "ðŸ‘"],
                    "Truthan": ["ðŸ¦ƒ"],
                    "Huhn": ["ðŸ”", "ðŸ“"],
                    "HÃ¤hnchen": ["ðŸ”", "ðŸ“"],
                    "Ente": ["ðŸ¦†"],
                    "Rose": ["ðŸŒ¹"],
                    "Sonnenblume": ["ðŸŒ»"],
                    "Samen": ["ðŸŒ±"],
                    "Hafer": ["ðŸŒ¾"],
                    "KrÃ¤uter": ["ðŸŒ¿"],
                    "Trauben": ["ðŸ‡"],
                    "Melone": ["ðŸˆ"],
                    "Kartoffel": ["ðŸ¥”"],
                    "Zwiebel": ["ðŸ§…"],
                    "Knoblauch": ["ðŸ§„"],
                    "Olive": ["ðŸ«’"],
                    "Karrotte": ["ðŸ¥•"],
                    "Paprika": ["ðŸ«‘"],
                    "Avocado": ["ðŸ¥‘"],
                    "Obergine": ["ðŸ†"],
                    "Blaubeere": ["ðŸ«"],
                    "Erdbeere": ["ðŸ“"],
                    "Wassermelone": ["ðŸ‰"],
                    "Mandarine": ["ðŸŠ"],
                    "Zitrone": ["ðŸ‹"],
                    "Banane": ["ðŸŒ"],
                    "Annanas": ["ðŸ"],
                    "Mango": ["ðŸ¥­"],
                    "Apfel": ["ðŸŽ", "ðŸ"],
                    "Birne": ["ðŸ"],
                    "Pfirsich": ["ðŸ‘"],
                    "Kirsche": ["ðŸ’"],
                    "Erdbeere": ["ðŸ“"],
                    "Kiwi": ["ðŸ¥"],
                    "Tomate": ["ðŸ…"],
                    "Kokosnuss": ["ðŸ¥¥"],
                    "Avocado": ["ðŸ¥‘"],
                    "Aubergine": ["ðŸ†"],
                    "Kartoffel": ["ðŸ¥”"],
                    "Karotte": ["ðŸ¥•"],
                    "Mais": ["ðŸŒ½"],
                    "Chili": ["ðŸŒ¶"],
                    "Gurke": ["ðŸ¥’"],
                    "Salat": ["ðŸ¥¬", "ðŸ¥—"],
                    "Brokkoli": ["ðŸ¥¦"],
                    "Pilz": ["ðŸ„"],
                    "ErdnÃ¼sse": ["ðŸ¥œ"],
                    "HaselnÃ¼sse": ["ðŸŒ°"],
                    "Kastanie": ["ðŸŒ°"],
                    "Brot": ["ðŸž"],
                    "Croissant": ["ðŸ¥"],
                    "Baguette": ["ðŸ¥–"],
                    "Breze": ["ðŸ¥¨"],
                    "Bagel": ["ðŸ¥¯"],
                    "Pfannkuchen": ["ðŸ¥ž"],
                    "KÃ¤se": ["ðŸ§€"],
                    "Fleisch": ["ðŸ¥©"],
                    "Speck": ["ðŸ¥“"],
                    "Burger": ["ðŸ”"],
                    "Pommes": ["ðŸŸ"],
                    "Pizza": ["ðŸ•"],
                    "Hot Dog": ["ðŸŒ­"],
                    "Sandwich": ["ðŸ¥ª"],
                    "Taco": ["ðŸŒ®"],
                    "Burrito": ["ðŸŒ¯"],
                    "Ei": ["ðŸ¥š"],
                    "Spiegei": ["ðŸ³"],
                    "Topf mit Lebensmitteln": ["ðŸ¥˜", "ðŸ²", "ðŸ¥™", "ðŸœ"],
                    "SchÃ¼ssel": ["ðŸ¥£"],
                    "Popcorn": ["ðŸ¿"],
                    "Salz": ["ðŸ§‚"],
                    "Dose": ["ðŸ¥«"],
                    "Sushi": ["ðŸ±", "ðŸ£"],
                    "Reis": ["ðŸš"],
                    "Curry-Reis": ["ðŸ›"],
                    "Spaghetti": ["ðŸ"],
                    "SÃ¼ÃŸkartoffel": ["ðŸ "],
                    "SpieÃŸ": ["ðŸ¢", "ðŸ¡"],
                    "KnÃ¶del": ["ðŸ¥Ÿ"],
                    "GlÃ¼ckskeks": ["ðŸ¥ "],
                    "Eis": ["ðŸ¨", "ðŸ§", "ðŸ¦"],
                    "Krapfen": ["ðŸ©"],
                    "Keks": ["ðŸª"],
                    "Muffin": ["ðŸ§"],
                    "Kuchen": ["ðŸ¥§", "ðŸ°", "ðŸŽ‚", "ðŸ¥®"],
                    "Schokolade": ["ðŸ«"],
                    "SÃ¼ÃŸigkeiten": ["ðŸ¬", "ðŸ­"],
                    "Pudding": ["ðŸ®"],
                    "Honig": ["ðŸ¯"],
                    "Milch": ["ðŸ¥›"],
                    "Tee": ["â˜•"],
                    "Suppe": ["ðŸµ"],
                    "Flasche": ["ðŸ¶"],
                    "Flasche": ["ðŸ¾"],
                    "Wein": ["ðŸ·"],
                    "Cocktail": ["ðŸ¸", "ðŸ¹", "ðŸ¥‚"],
                    "Bier": ["ðŸº", "ðŸ»", "ðŸ¥ƒ"],
                },
                matchingEmos: []
            }
        },
        methods: {
            getRandomNumber(min, max) {
                return Math.random() * (max - min) + min;
            }
        },
        created() {
            var winWidth = window.innerWidth;
            var winHeight = window.innerHeight;

            const words = this.recipe.ingredients.toString().replaceAll(",", " ").split(" ")
            words.forEach(word => {
                if (word !== "") {
                    const lowercasedWord = word.toLowerCase()
                    const capitalizedWord = lowercasedWord.replace(/^\w/, c => c.toUpperCase());

                    // random position
                    const randomTop = this.getRandomNumber(0, winHeight);
                    const randomLeft = this.getRandomNumber(0, winWidth);

                    if (capitalizedWord in this.allEmos) {
                        // isMatching = true
                        let matchingEmoArray = this.allEmos[capitalizedWord]
                        const matchingEmojie = matchingEmoArray[Math.floor(Math.random() * matchingEmoArray
                            .length)]
                        this.matchingEmos.push({
                            "text": matchingEmojie,
                            "top": randomTop,
                            "left": randomLeft
                        })
                    } else {
                        if (word.length >= 4) {
                            for (const key in this.allEmos) {
                                if (lowercasedWord.includes(key.toLowerCase()) || key.toLowerCase().includes(
                                        lowercasedWord)) {
                                    // isMatching = true
                                    let matchingEmoArray = this.allEmos[key]
                                    const matchingEmojie = matchingEmoArray[Math.floor(Math.random() *
                                        matchingEmoArray
                                        .length)]
                                    this.matchingEmos.push({
                                        "text": matchingEmojie,
                                        "top": randomTop,
                                        "left": randomLeft
                                    })
                                    break
                                }
                            }
                        }
                    }
                }
            })
        }

    }
</script>

<style scoped>
    .background {
        z-index: 0;
    }

    .emojie {
        font-size: 4em;
    }
</style>